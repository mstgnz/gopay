# Paycell API Request & Response Examples

This document provides comprehensive examples for all Paycell API endpoints.

## Card Management

### getCards

**Request Example:**

```json
{
  "msisdn": "5380521479",
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  }
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20181017103525997",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "eulaId": "16",
  "cardList": [
    {
      "cardId": "bd142ddd-9fa4-46a6-8024-895500274826",
      "maskedCardNo": "402277******4026",
      "alias": "CARDFINANS**26",
      "cardBrand": "CARDFINANS",
      "isDefault": true,
      "isExpired": false,
      "showEulaId": false,
      "isThreeDValidated": true,
      "isOTPValidated": false,
      "activationDate": "2018-10-10 10:06:29"
    },
    {
      "cardId": "4b20f20c-945b-46b7-8538-4ea22b5c8c79",
      "maskedCardNo": "545616******5454",
      "alias": "CARDFINANS**54",
      "cardBrand": "CARDFINANS",
      "isDefault": false,
      "isExpired": false,
      "showEulaId": false,
      "isThreeDValidated": true,
      "isOTPValidated": false,
      "activationDate": "2018-10-16 19:15:27"
    }
  ]
}
```

### registerCard

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "alias": "3dlicard",
  "cardToken": "0a2c1212-4107-4eee-8b4d-22ff984ee46b",
  "eulaId": "16",
  "isDefault": "true",
  "msisdn": "905322870886",
  "threeDSessionId": "f547e92e-0675-4329-90ba-a85bea0dbaf7"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20181018101442892",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "cardId": "f97715a8-77db-4d3f-9dd6-497c87be82ed"
}
```

### updateCard

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309112423228",
    "transactionId": "12345678901234567891"
  },
  "alias": "YKBTest",
  "cardId": "01525e7d-e6c6-448d-aaab-cca5339f24c6",
  "eulaId": "16",
  "isDefault": " ",
  "msisdn": "905591111112",
  "threeDSessionId": " "
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567891",
    "responseDateTime": "20181017141035079",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null
}
```

### deleteCard

**Request Example:**

```json
{
  "cardId": "40760eb6-0941-4c5b-a4c0-3b02cfe4fdac",
  "msisdn": "905599999969",
  "requestHeader": {
    "applicationName": " XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "91.93.156.6",
    "transactionDateTime": "20181002182828017",
    "transactionId": "00000000000002187144"
  }
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "00000000000002187144",
    "responseDateTime": "20181017155605211",
    "responseCode": "0",
    "responseDescription": "Success"
  }
}
```

## Payment Operations

### provision

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "cardId": "bd142ddd-9fa4-46a6-8024-895500274826",
  "merchantCode": "2003",
  "msisdn": "5380521479",
  "referenceNumber": "12333374401234567892",
  "amount": "2351",
  "paymentType": "SALE",
  "acquirerBankCode": "111",
  "threeDSessionId": " "
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20181017104734492",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "551952788718101710473129",
  "acquirerBankCode": "111",
  "issuerBankCode": "111",
  "approvalCode": "646174",
  "reconciliationDate": "20181017"
}
```

###Â inquire

**Request Example:**

```json
{
  "merchantCode": "2001",
  "msisdn": "905591111112",
  "originalReferenceNumber": "12345678901234567891",
  "referenceNumber": "12345678901234567892",
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309112423228",
    "transactionId": "12345678901234567890"
  }
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567890",
    "responseDateTime": "20181017131815713",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "orderId": "926197750916112311250814",
  "acquirerBankCode": "046",
  "status": "REVERSE",
  "provisionList": [
    {
      "provisionType": "REVERSE",
      "transactionId": "12345678901234567890",
      "amount": "2351",
      "approvalCode": "478341",
      "dateTime": "20161123125420528",
      "reconciliationDate": "20161123",
      "responseCode": "",
      "responseDescription": ""
    },
    {
      "provisionType": "SALE",
      "transactionId": "12345678901234567890",
      "amount": "2351",
      "approvalCode": "478341",
      "dateTime": "20161123112507261",
      "reconciliationDate": "20161123",
      "responseCode": "",
      "responseDescription": ""
    }
  ]
}
```

### reverse

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "cardId": "e14fa3bc-82df-4086-bae2-664b77ae8692",
  "merchantCode": "9998",
  "msisdn": "5380521479",
  "referenceNumber": "12333374401234666892",
  "originalReferenceNumber": "12333374401234667882",
  "amount": "2351",
  "paymentType": "SALE",
  "acquirerBankCode": "111",
  "threeDSessionId": " "
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20181101101959745",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "reconciliationDate": "20181101",
  "approvalCode": "575533",
  "retryStatusCode": null,
  "retryStatusDescription": null
}
```

### refund

**Request Example:**

```json
{
  "amount": "1000",
  "merchantCode": "2003",
  "msisdn": "905599999969",
  "originalReferenceNumber": "12319332200000000000",
  "referenceNumber": "1263000000000000933",
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "91.93.156.6",
    "transactionDateTime": "20181002182828017",
    "transactionId": "00000000000002187144"
  }
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "00000000000002187144",
    "responseDateTime": "20181017143240726",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "reconciliationDate": "20181017",
  "approvalCode": "820013",
  "retryStatusCode": null,
  "retryStatusDescription": null
}
```

### summaryReconciliation

**Request Example:**

```json
{
  "merchantCode": "2003",
  "reconciliationDate": "20160404",
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "12312312",
    "transactionDateTime": "20160309112423228",
    "transactionId": "12345678901234567890"
  },
  "totalRefundAmount": "10",
  "totalRefundCount": "1",
  "totalReverseAmount": "0",
  "totalReverseCount": "0",
  "totalSaleAmount": "152080",
  "totalSaleCount": "5"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567890",
    "responseDateTime": "20181017134955617",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "reconciliationResult": "NOK",
  "reconciliationDate": "20160404",
  "totalSaleAmount": "0",
  "totalReverseAmount": "0",
  "totalRefundAmount": "0",
  "totalPreAuthAmount": "0",
  "totalPostAuthAmount": "0",
  "totalPreAuthReverseAmount": "0",
  "totalPostAuthReverseAmount": "0",
  "totalSaleCount": 0,
  "totalReverseCount": 0,
  "totalRefundCount": 0,
  "totalPreAuthCount": 0,
  "totalPostAuthCount": 0,
  "totalPreAuthReverseCount": 0,
  "totalPostAuthReverseCount": 0,
  "extraParameters": null
}
```

### getThreeDSession

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "amount": "2351",
  "cardToken": "8c0e9491-9149-4b8e-9d99-a40669486ebd",
  "installmentCount": 1,
  "merchantCode": "2005",
  "msisdn": "5380521479",
  "referenceNumber": " ",
  "target": "MERCHANT",
  "transactionType": "AUTH"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20181018085925250",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "threeDSessionId": "fa3d0e81-e9c8-4329-b0b7-5837c332c71e"
}
```

### getThreeDSessionResult

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567890"
  },
  "merchantCode": "2005",
  "msisdn": "5380521479",
  "referenceNumber": " ",
  "threeDSessionId": "4e215e3a-ebe7-4800-b44c-21ba789fe3d5"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567890",
    "responseDateTime": "20181031083214159",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "currentStep": "3",
  "mdErrorMessage": "Authenticated",
  "mdStatus": "1",
  "threeDOperationResult": {
    "threeDResult": "0",
    "threeDResultDescription": "3D Dogrulama basarili"
  }
}
```

### provisionForMarketPlace

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309112423230",
    "transactionId": "12345678901234567890"
  },
  "acquirerBankCode": "046",
  "amount": "2351",
  "cardId": "813256de-a1a7-4988-b2d0-33282fcedd98",
  "currency": "TRY",
  "merchantCode": "2003",
  "msisdn": "905591111112",
  "paymentType": "SALE",
  "referenceNumber": "12345678961334373593"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567890",
    "responseDateTime": "20190130214033491",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "042802072919013021403141",
  "acquirerBankCode": "046",
  "issuerBankCode": "046",
  "approvalCode": "205876",
  "reconciliationDate": "20190130",
  "iyzPaymentId": null,
  "iyzPaymentTransactionId": null
}
```

### getProvisionHistory

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "merchantCode": "2003",
  "partitionNo": "1",
  "reconciliationDate": "20181018"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20181030220749159",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "nextPartitionNo": 2,
  "transactionList": [
    {
      "transactionDateTime": "20181018103818666",
      "orderId": "103422357118101810382015",
      "acquirerBankCode": "111",
      "approvalCode": "537935",
      "issuerBankCode": "111",
      "amount": 23.51,
      "netAmount": 23.51,
      "referenceNumber": "12333374409823467891",
      "transactionId": "12345678901234567893",
      "transactionParams": []
    },
    {
      "transactionDateTime": "20181018104734870",
      "orderId": "716242318518101810473518",
      "acquirerBankCode": "111",
      "approvalCode": "644171",
      "issuerBankCode": "111",
      "amount": 23.51,
      "netAmount": 23.51,
      "referenceNumber": "12333374409823468891",
      "transactionId": "12345678901234567893",
      "transactionParams": []
    }
  ]
}
```

### getTermsOfServiceContent

**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "11.111.111.111",
    "transactionDateTime": "20161125121627734",
    "transactionId": "12345678901234566808"
  }
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234566808",
    "responseDateTime": "20190128093135788",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "eulaId": 16,
  "termsOfServiceHtmlContentTR": "SÃ¶zleÅme iÃ§eriÄinin TÃ¼rkÃ§e versiyonu termsOfServiceHtmlContentEN: SÃ¶zleÅmeiÃ§eriÄininÄ°ngilizceversiyonu"
}
```

### getCardBinInformationWithBKM

rest url : https://tpay-test.turkcell.com.tr/tpay/provision/services/restful/getCardToken/getCardBinInformationWithBKM

**Request Example:** :

```json
{
  "requestHeader": {
    "applicationName": "****",
    "applicationPwd": "****",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "binValue": "",
  "merchantCode": "****",
  "getType": "ALL"
}
```

**Response Example:** :

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20240606144934384",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "cardBinInformations": [
    {
      "bankCode": "067",
      "bankName": "YAPI KREDI BANKASI",
      "binRangeMax": 49213099,
      "binRangeMin": 49213000,
      "cardBrand": "WORLD",
      "cardOrganization": "VISA",
      "cardType": "Credit Card",
      "commercialType": "BIREYSEL",
      "typeId": 1
    }
  ]
}
```

MÃ¼Återilerin kart numarasÄ±nÄ±n ilk 6 ya da 8 hanesinden oluÅan bin bilgisi veya kart token bilgisi girilerek ya da kayÄ±tlÄ± tÃ¼m kartlarÄ±n listelenebileceÄi ALL seÃ§eneÄi kullanÄ±larak kart bilgilerinin gÃ¶rÃ¼ntÃ¼lenmesini saÄlayan servistir. KartÄ±n bankasÄ± ve kartÄ±n Ã¶zelliklerini, bin aralÄ±ÄÄ± verisi ile dÃ¶ner.

Request Parameters

Field Format Length (O)ptional/(M)andatory Description
token String 400 M getCardTokenSecure servisi Ã§aÄrÄ±larak elde edilen token deÄeridir. Bin.Value ya da GetType gÃ¶nderildiÄinde null gÃ¶nderilebilir.
binValue String 19 M Kart numarasÄ±nÄ±n ilk 6 ya da 8hanesidir. Token ya da GetType gÃ¶nderildiÄinde null gÃ¶nderilebilir.
getType String 3 M ALL olarak gÃ¶nderildiÄinde tÃ¼m kayÄ±tlÄ± tÃ¼m kartlarÄ±n bilgileri listelenir. Token ya da BinValue gÃ¶nderildiÄinde null gÃ¶nderilebilir.

Response Parameters

List Name Field Format Length (O)ptional/(M)andatory Description
responseHeader transactionId String M Transactionâa ait id bilgisidir.
responseHeader responseDateTime String M Ä°Ålemin tarih bilgisi
responseHeader responseCode String M Hata kodudur. 0 ise baÅarÄ±ldÄ±r, diÄer tÃ¼m kodlarda hatalÄ±dÄ±r.
responseHeader responseDescription String M Response codeâa ait aÃ§Ä±klamadÄ±r.
extraParameters key String O Optional olarak iletilen veriye ait label bilgisi
extraParameters value String O Optional olarak iletilen veriye ait deÄer bilgisi
cardBinInformations bankCode String 3 M Kart banka kodu
cardBinInformations bankName String 50 M Kart bankasÄ±nÄ±n adÄ±
cardBinInformations binRangeMax String 16 M Kart bilgilerine sahip bin aralÄ±ÄÄ±nÄ±n max deÄeri
cardBinInformations binRangeMin String 16 M Kart bilgilerine sahip bin aralÄ±ÄÄ±nÄ±n min deÄeri
cardBinInformations cardBrand String 16 M Kart brandi
cardBinInformations cardOrganization String 16 M Kart organizasyonu
cardBinInformations cardType String 16 M Kart tipi (Kredi kartÄ±/debit)
cardBinInformations commercialType String 16 M KartÄ±n ticari tipi
cardBinInformations typeId String 1 M Kart tipi id deÄeri

getPaymentMethods
Ä±mage
MÃ¼Återinin Paycellâde tanÄ±mlÄ± olan kartlarÄ± (kredi/debit/prepaid/PAYE yemek kartÄ±) ve mobil Ã¶deme(faturana yansÄ±t) yÃ¶ntemi olmak Ã¼zere kullanabileceÄi Ã¶deme yÃ¶ntemlerinin sorgulanÄ±p listelenmesi amacÄ±yla kullanÄ±lÄ±r. MÃ¼Återinin, Ã¼ye iÅyerinin uygulama ekranÄ±nda ilk kez Paycellâde tanÄ±mlÄ± kartlarÄ±nÄ±n ve mobil Ã¶demesinin sorgulanmasÄ± durumunda Ã¶ncelikle mÃ¼Återinin veri paylaÅÄ±m iznini uygulama Ã¼zerinde vermiÅ olmasÄ± gerekmektedir. MÃ¼Återinin Ã¶deme yÃ¶ntemlerinin listelenmesine yÃ¶nelik verdiÄi izin Ã¼ye iÅyeri uygulamasÄ±nda tutulmalÄ±dÄ±r.
requestParameters

Field Format Length (O)ptional/(M)andatory Description
msisdn String 20 M MÃ¼Återinin uygulamaya login olduÄu telefon numarasÄ±. Ãlke kodu + Telefon No formatÄ±nda iletilir.
responseParameters

Field Format Length (O)ptional/(M)andatory Description
eulaID String 20 M
MÃ¼Återinin tanÄ±mlÄ± kart bilgisinden baÄÄ±msÄ±z olarak Paycell sisteminde gÃ¼ncel olan kart sÃ¶zleÅme numarasÄ± bilgisini dÃ¶ner:

1.Yeni kart ekleme senaryosunda mÃ¼Återiye gÃ¶sterilmesi gereken sÃ¶zleÅme metni numarasÄ± gÃ¶sterilir, bu ID registerCard methoduânda input olarak kullanÄ±lÄ±r.

2. Mevcut tanÄ±mlÄ± kartlar iÃ§in ise showEulaId = true ise ilgili kart iÃ§in mÃ¼Återiye gÃ¶sterilmesi gereken sÃ¶zleÅme metni numarasÄ± gÃ¶sterilir. SÃ¶zleÅme kabul edildikten sonra updateCard requesti ile sÃ¶zleÅme bilgisi gÃ¼ncellenir.

cardList Array O MÃ¼Återinin Paycellâde tanÄ±mlÄ± kartlarÄ± bulunmasÄ± durumunda kart bilgileri liste olarak iletilir, tanÄ±mlÄ± kart bulunmuyorsa boÅ dÃ¶nÃ¼lÃ¼r.
mobilePayment Array O MÃ¼Återinin Mobil Ãdeme sisteminde kaydÄ± bulunuyorsa mobil Ã¶deme bilgileri iletilir. MÃ¼Återinin Mobil Ãdeme sisteminde kaydÄ± yoksa boÅ dÃ¶nÃ¼lÃ¼r.
cardList

Field Format Length (O)ptional/(M)andatory Description
cardId String 36 M Kart bilgisine iliÅkin uygulamaya Ã¶zel kart referans numarasÄ±dÄ±r, tanÄ±mlÄ± kart iÃ§in yapÄ±lan iÅlemlerde bu deÄer ilgili methodâlarda input olarak kullanÄ±lÄ±r.
maskedCardNo String 16 M KartÄ±n ilk 6 ve son 4 hanesi aÃ§Ä±k, aradaki deÄerler \*âlÄ± olarak maskelenmiÅ numarasÄ±dÄ±r.
alias String 20 O MÃ¼Återi tarafÄ±ndan kart ekleme veya kart gÃ¼ncelleme aÅamasÄ±nda belirlenen kartÄ±nÄ± ayÄ±rt etmeye yarayan tanÄ±m bilgisidir.
cardBrand String 20 O
KartÄ±n BIN bilgisinden elde edilen Paycellâde tutulan marka bilgisidir."

cardBrand": "PAYE", olan kartlar PAYE yemek kartlarÄ±dÄ±r.

isDefault Boolean M Kart "varsayÄ±lan kart olarak" tanÄ±mlÄ± ise true, diÄer durumda "false" dÃ¶nÃ¼lÃ¼r; default kart bilgisi, mÃ¼Återi tarafÄ±ndan kart ekleme veya kart gÃ¼ncelleme iÅlemi esnasÄ±nda deÄiÅtirilebilir. KullanÄ±m alanÄ± Ã¶rneÄi olarak, uygulama Ã¶deme yapÄ±lacak kartlarÄ± listelerken kartlar arasÄ±nda bu deÄerin "true" olduÄu kartÄ± seÃ§ili olarak gÃ¶sterebilir.
isExpired Boolean M Paycellâde tanÄ±mlÄ± olan kartÄ±n son kullanÄ±m tarihi geÃ§miÅ ise "true", diÄer durumda "false" dÃ¶nÃ¼lÃ¼r. True olarak dÃ¶nÃ¼len kart iÃ§in uygulama ekranÄ±nda kartÄ±n son kullanÄ±m tarihi geÃ§tiÄine dair bilgilendirme mesajÄ± verilebilir, bu kart Ã¶deme iÅlemlerinde kullanÄ±lamaz, kartÄ±n silinip yeni kartÄ±n eklenmesi gerekmektedir.
showEulaId Boolean M Paycellâde tanÄ±mlÄ± olan kart gÃ¼ncel Paycell sÃ¶zleÅme numarasÄ±na sahip deÄilse "true", diÄer durumda "false" dÃ¶nÃ¼lÃ¼r. "True" olarak iletilen bir kart iÃ§in Ã¶deme iÅlemi yapÄ±lmak isteniyorsa Ã¶ncelikle mÃ¼Återiye bu kart iÃ§in gÃ¼ncel sÃ¶zleÅme metni uygulamada gÃ¶sterilip, gÃ¼ncel eulaID deÄeri iÃ§in updateCard methodâu ile kart bilgisi gÃ¼ncellenmelidir, gÃ¼ncel sÃ¶zleÅme bilgisine sahip olmayan bir kart iÃ§in (showEulaId=true) iÅlem gÃ¶nderilmemelidir.
activationDate String M KartÄ±n Paycellâde tanÄ±mlandÄ±ÄÄ± tarih bilgisidir.
isThreeDValidated Boolean M Kart Paycellâe 3D doÄrulama yÃ¶ntemi ile tanÄ±mlandÄ± ise veya Paycell Ã¼zerinden 3D doÄrulama yÃ¶ntemi ile bir Ã¶deme iÅlemi yapÄ±ldÄ± ise "true", diÄer durumda "false" dÃ¶nÃ¼lÃ¼r.
isOTPValidated Boolean M Ä°leride kullanÄ±lmak Ã¼zere ayrÄ±lmÄ±ÅtÄ±r, Åu an iÃ§in "false" dÃ¶nÃ¼lmektedir. KartÄ±n OTP yÃ¶ntemi ile doÄrulanÄ±p doÄrulanmadÄ±ÄÄ± bilgisidir.
mobilePayment

Field Format Length (O)ptional/(M)andatory Description
isDcbOpen Boolean M MÃ¼Återinin mobil Ã¶demesi aÃ§Ä±k ise "true", deÄilse "false" dÃ¶nÃ¼lÃ¼r. Bu alanÄ±n "false" dÃ¶nÃ¼lmesi halinde Ã¼ye iÅyeri bir checkbox ile mÃ¼Återiye mobil Ã¶demesinin aÃ§mak isteyip istemediÄini sorabilir.
isEulaExpired Boolean M MÃ¼Återinin daha Ã¶nceden imzaladÄ±ÄÄ± bir mobil Ã¶deme sÃ¶zleÅmesi varsa ve bu sÃ¶zleÅme gÃ¼ncel deÄilse "true", gÃ¼ncelse "false" dÃ¶nÃ¼lÃ¼r.
eulaId String 20 O MÃ¼Återinin mobil Ã¶deme sÃ¶zleÅmesi gÃ¼ncel deÄilse bu alanda gÃ¼ncel sÃ¶zleÅme versiyonu numarasÄ± dÃ¶nÃ¼lÃ¼r.
eulaUrl String 20 O MÃ¼Återinin mobil Ã¶deme sÃ¶zleÅmesi gÃ¼ncel deÄilse bu alanda verilecek link ile mÃ¼Återi gÃ¼ncel sÃ¶zleÅmeye yÃ¶nlendirilir.
signedEulaId String 20 O MÃ¼Återinin en son imzaladÄ±ÄÄ± mobil Ã¶deme sÃ¶zleÅmesinin versiyonunu gÃ¶sterir. EÄer mÃ¼Återinin daha Ã¶nceden imzaladÄ±ÄÄ± bir sÃ¶zleÅme yok ise boÅ dÃ¶nÃ¼lÃ¼r.
limit String 20 M MÃ¼Återinin aylÄ±k kullanabileceÄi mobil Ã¶deme limitidir. Son iki hanesi kÃ¼sÃ¼ratÄ± belirtir.
maxLimit String 20 M MÃ¼Återinin mobil Ã¶deme iÅlemi iÃ§in kullanabileceÄi maksimum limittir. Son iki hanesi kÃ¼sÃ¼ratÄ± belirtir.
remainingLimit String 20 M MÃ¼Återinin mobil Ã¶deme yapmak iÃ§in kullanabileceÄi kalan limitini gÃ¶sterir. Son iki hanesi kÃ¼sÃ¼ratÄ± belirtir.
statementDate String 20 M MÃ¼Återinin mobil Ã¶demeye kaydolup sÃ¶zleÅme imzaladÄ±ktan sonra sÃ¶zleÅmesinin aktifleneceÄi tarihtir.

**Request Example:**

```json
{
  "msisdn": "5305289290",
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  }
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20201121222034021",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "eulaId": "16",
  "cardList": [
    {
      "cardId": "6f08f86f-0343-4e9e-a3e2-656a3facf79b",
      "maskedCardNo": "454671******7894",
      "alias": "MAXIMUM",
      "cardBrand": "MAXIMUM",
      "isDefault": true,
      "isExpired": false,
      "showEulaId": false,
      "isThreeDValidated": true,
      "isOTPValidated": false,
      "activationDate": "2020-11-02 22:08:55",
      "cardType": "Credit"
    },
    {
      "cardId": "576a99b7-0cc3-4ecd-8e06-3613013e14a5",
      "maskedCardNo": "700001******3173",
      "alias": "payekart",
      "cardBrand": "PAYE",
      "isDefault": false,
      "isExpired": false,
      "showEulaId": false,
      "isThreeDValidated": false,
      "isOTPValidated": false,
      "activationDate": "2020-11-17 12:42:28",
      "cardType": "Debit"
    }
  ],
  "mobilePayment": {
    "remainingLimit": "70164",
    "limit": "75000",
    "maxLimit": "75000",
    "isDcbOpen": true,
    "statementDate": "20201125",
    "isEulaExpired": true,
    "signedEulaId": "188",
    "eulaId": "188",
    "eulaUrl": null
  }
}
```

### openMobilePayment

MÃ¼Återi Ã¶deme yÃ¶ntemlerini listeledikten sonra mobil Ã¶demesinin kapalÄ± olduÄu bilgisi geldiÄinde merchant mÃ¼Återiye bir checkbox ile mobil Ã¶demeyi aÃ§ seÃ§eneÄi sunabilir. Yetkili merchantlara kart kayÄ±t sÃ¶zleÅmesi ile birlikte mobil Ã¶deme sÃ¶zleÅmesi de verilecektir. MÃ¼Återinin bu sÃ¶zleÅmeler iÃ§in tek bir checkbox ile Paycell kart saklama sÃ¶zleÅmesi ve mobil Ã¶deme sÃ¶zleÅmesini kabul ettiÄine dair sÃ¶zleÅme onayÄ± vermesi gerekir.
MÃ¼Återi bu ekranda mobil Ã¶demesini aÃ§ma seÃ§eneÄini iÅaretler ve merchantÄ±n yine checkboxta sunacaÄÄ± mobil Ã¶deme sÃ¶zleÅmesini onaylar ise merchant openMobilePayment servisini Ã§aÄÄ±racaktÄ±r. Bu servis ile mÃ¼Återinin mobil Ã¶demesi kullanÄ±ma aÃ§Ä±labilecektir.
Request Parameters

Field Format Length (O)ptional/(M)andatory Description
msisdn String 20 M MÃ¼Återinin uygulamaya login olduÄu telefon numarasÄ±. Ãlke kodu + Telefon No formatÄ±nda iletilir.
eulaId String 20 O getPaymentMethods servisinde isEulaExpired alanÄ± "true" dÃ¶nmÃ¼Åse bu alana gÃ¼ncel sÃ¶zleÅme numarasÄ± girilir, "false" dÃ¶nmÃ¼Åse bu alan kullanÄ±lmaz.
**Request Example:** (SÃ¶zleÅmesi GÃ¼ncel Olmayan MÃ¼Återi Ä°Ã§in)

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "msisdn": "5320612543",
  "eulaId": "185"
}
```

**Response Example:** (SÃ¶zleÅmesi GÃ¼ncel Olmayan MÃ¼Återi Ä°Ã§in)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526181351531",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null
}
```

**Request Example:** (SÃ¶zleÅmesi GÃ¼ncel Olan MÃ¼Återi Ä°Ã§in)

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "msisdn": "5325628808"
}
```

**Response Example:** (SÃ¶zleÅmesi GÃ¼ncel Olan MÃ¼Återi Ä°Ã§in)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526184658307",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null
}
```

## OTP

### sendOTP

MÃ¼Återi mobil Ã¶deme yÃ¶ntemiyle Ã¶deme yapmak istediÄinde, Ã¶demeyi baÅlatmadan Ã¶nce OTP ile doÄrulama yapacaktÄ±r. sendOTP servisi tarafÄ±ndan mÃ¼Återiye ilgili Ã¶demeyi doÄrulamasÄ± iÃ§in SMS ile bir Åifre gÃ¶nderilecektir.
Request Parameters

Field Format Length (O)ptional/(M)andatory Description
msisdn String 20 M MÃ¼Återinin uygulamaya login olduÄu telefon numarasÄ±. Ãlke kodu + Telefon No formatÄ±nda iletilir.
amount String 20 M Mobil Ã¶deme yapÄ±lacak iÅleme ait tutardÄ±r.Son iki hanesi kÃ¼sÃ¼rat olacak Åekildedir.
referenceNumber String 20 M Ãye iÅyeri uygulamasÄ± tarafÄ±ndan Ã¼retilecek unique numerik iÅlem referans numarasÄ± deÄeridir.
Response Parameters

Field Format Length (O)ptional/(M)andatory Description
token String 36 M Her Åifre iÃ§in unique olarak Ã¼retilen doÄrulama deÄeri
expireDate String 17 M Åifrenin parametrik olarak ayarlanabilen geÃ§erlilik sÃ¼residir. YYMMddHHmmssSSS formatÄ±ndadÄ±r.
**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "msisdn": "5332149727",
  "amount": "1",
  "referenceNumber": "1234567891234567800"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190524171455059",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "token": "4bba3893-dce6-4d44-a264-1a6429cf7a83",
  "expireDate": 20190524171754513
}
```

### validateOTP

sendOTP ile gÃ¶nderilen Åifrenin doÄrulanmasÄ± iÃ§in kullanÄ±lacak servistir.
Request Parameters

Field Format Length (O)ptional/(M)andatory Description
msisdn String 20 M MÃ¼Återinin uygulamaya login olduÄu telefon numarasÄ±. Ãlke kodu + Telefon No formatÄ±nda iletilir.
amount String 20 M Mobil Ã¶deme yapÄ±lacak iÅleme ait tutardÄ±r.Son iki hanesi kÃ¼sÃ¼rat olacak Åekildedir.
referenceNumber String 20 M Ãye iÅyeri uygulamasÄ± tarafÄ±ndan Ã¼retilecek unique numerik iÅlem referans numarasÄ± deÄeridir.
otp String 4 M sendOTP servisininÃ§aÄrÄ±lmasÄ± sonucu mÃ¼Återiye SMS olarak gÃ¶nderilen, iÅleme Ã¶zel unique Åifre
token String 36 M sendOTP servisinin response olarak dÃ¶ndÃ¼ÄÃ¼, bir otp ve referenceNumberâa Ã¶zel token deÄeri
Response Parameters

Field Format Length (O)ptional/(M)andatory Description
remainingRetryCount String 1 O OTPânin baÅarÄ±lÄ± Åekilde girilebilmesi iÃ§in geriye kalan deneme hakkÄ±nÄ± belirten sayÄ±dÄ±r. OTP baÅarÄ±lÄ± Åekilde girildiyse boÅ olarak kalÄ±r, baÅarÄ±sÄ±zsa kalan hak sayÄ±sÄ±nÄ± gÃ¶sterir.
**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "msisdn": "5332100016",
  "amount": "1",
  "otp": "1769",
  "token": "58a63efa-7688-4fd6-8bee-a45051f611d4",
  "referenceNumber": "1234567891234567810"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526202332720",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "remainingRetryCount": null
}
```

### provisionAll

Ãdeme isteklerinin Paycellâe iletilmesi amacÄ±yla kullanÄ±lÄ±r.
provisionAll servisi ile;

Paycellâde tanÄ±mlÄ± olan bir kart kullanÄ±larak (kredi/debit/prepaid/PAYE yemek kartÄ± ile)
Kart numarasÄ± girilerek (kredi/debit/prepaid kartlar ile)
Mobil Ã¶deme yÃ¶ntemi(faturama yansÄ±t) seÃ§ilerek
Ã¶deme yapÄ±labilir.
Ãdeme alternatifleri ve serviste iletilecek cardId ve cardToken kullanÄ±mlarÄ± aÅaÄÄ±daki Åekildeki gibidir.
KayÄ±tlÄ± kart ile cvc girilmeden:
Sadece cardId gÃ¶nderilir.PAYE yemek kartÄ± ile Ã¶deme seÃ§eneÄi sadece kartÄ±n PAYCELL cÃ¼zdana kayÄ±tlÄ± olmasÄ± durumunda kullanÄ±labilmektedir.
KayÄ±tlÄ± kart ile cvc girilerek:
cardId ve sadece cvcânin input olarak gÃ¶nderildiÄi getCardTokenSecure servisi Ã§aÄrÄ±larak elde edilen cardToken parametreleri iletilir.
Kredi kartÄ± numarasÄ± ve son kullanÄ±m tarihi girilerek:
Kart numarasÄ± ve son kullanÄ±m tarihiânin input olarak gÃ¶nderildiÄi getCardTokenSecure servisi Ã§aÄrÄ±larak elde edilen cardToken parametresi iletilir.
Kredi kartÄ± numarasÄ±, son kullanÄ±m tarihi, cvc bilgisi girilerek:
Kart numarasÄ±, son kullanÄ±m tarihi ve cvcânin input olarak gÃ¶nderildiÄi getCardTokenSecure servisi Ã§aÄrÄ±larak elde edilen cardToken parametresi iletilir.
Mobil Ã¶deme seÃ§ilerek:
Mobil Ã¶deme yapÄ±lacak MSISDN iletilir.
Request Parameters

Field Format Length (O)ptional/(M)andatory Description
msisdn String 20 M MÃ¼Återinin uygulamaya login olduÄu telefon numarasÄ±. Ãlke kodu + Telefon No formatÄ±nda iletilir.
cardId String 36 O Paycellâde tanÄ±mlÄ± kart ile Ã¶deme yapÄ±lmak istenmesi durumunda gÃ¶nderilir.
referenceNumber String 20 M Ãye iÅyeri uygulamasÄ± tarafÄ±ndan Ã¼retilecek unique numerik iÅlem referans numarasÄ± deÄeridir.
originalReferenceNumber String 20 O Ãn otorizasyon kapama amaÃ§lÄ± paymentType = POSTAUTH iÅlemi gÃ¶nderildiÄinde kapatÄ±lacak olan Ã¶n otorizasyon iÅleminin referenece number deÄeridir. DiÄer iÅlem tiplerinde gÃ¶nderilmez.
merchantCode String 19 M Ãdeme iÅleminin baÅlatÄ±ldÄ±ÄÄ± Paycellâde tanÄ±mlÄ± Ã¼ye iÅyeri kodu bilgisi gÃ¶nderilir. Entegrasyon sonrasÄ±nda her tanÄ±mlanan yeni Ã¼ye iÅyeri iÃ§in Paycell tarafÄ±ndan merchantCode deÄeri paylaÅÄ±lÄ±r.
amount String 12 M Ä°Ålem tutarÄ±dÄ±r.
Son 2 hane KURUÅâu ifade eder. VirgÃ¼l kullanÄ±lmaz.

Ãrnekler:
1TL = 100
15,25TL = 1525
currency String 3 M Ä°Ålem dÃ¶viz cinsini belirler.TRY, EUR, USD, vb.
installmentCount Integer 2 O Taksit sayÄ±sÄ± bilgisidir. Taksitsiz iÅlemlerde 1 veya 0 olarak gÃ¶nderilebilir. TÄ±rnak iÅareti kullanÄ±lmamalÄ±dÄ±r.
pointAmount String 12 O Ä°leride kullanÄ±lmak Ã¼zere ayrÄ±lmÄ±ÅtÄ±r. Kart puan bilgisidir.
paymentType Enum M Ãdeme iÅlem tipini belirtir, Ã¶n otorizasyon uygulamasÄ± sÃ¶z konusu deÄilse SALE deÄeri gÃ¶nderilir[SALE, PREAUTH, POSTAUTH].
PAYE kart ile Ã¶deme sadece SALE Ã¶deme tipini desteklemektedir.
paymentMethodType Enum M Ãdeme yÃ¶ntemi tipini belirtir. Mobil Ã¶deme yapÄ±lcaksa "MOBILE_PAYMENT", kartla Ã¶deme yapÄ±lacaksa "CREDIT_CARD" gÃ¶nderilir.
acquirerBankCode String 4 O Ä°leride kullanÄ±lmak Ã¼zere ayrÄ±lmÄ±ÅtÄ±r. Sanal Pos bankasÄ± kodu iletilir.
pin String 6 O Ä°leride kullanÄ±lmak Ã¼zere ayrÄ±lmÄ±ÅtÄ±r. Paycell kullanÄ±cÄ±sÄ± PIN deÄeri iletilir.
threeDSessionId String 36 O Ãdeme iÅleminin 3D doÄrulama yÃ¶ntemi ile yapÄ±lmasÄ± durumunda getThreeDSession servisi cevabÄ±nda alÄ±nan session ID bilgisidir.
cardToken String 36 O Kart numarasÄ± girilerek yapÄ±lmak istenen Ã¶deme iÅlemlerinde getCardTokenSecure servisi alÄ±nan deÄer veya kayÄ±tlÄ± kart kullanÄ±mÄ±nda cvc ile Ã¶deme yapÄ±lmasÄ±na iliÅkin getCardTokenSecure servisi ile cvc karÅÄ±lÄ±ÄÄ±nda alÄ±nan token deÄeri .
extraParameters Array O Ãdeme iÅlemine iliÅkin ek bir parametre deÄeri opsiyonel olarak iletilebilir.
EÄer iÅlem Yemek kartÄ± â PAYE ile yapÄ±lÄ±rsa, Ã¶demelerde ek olarak bu alanlar iletilecektir. Kredi KartÄ±, Debit ve Paycell Kart, Mobil Ãdeme ile yapÄ±lan iÅlemlerde PAYE sahalarÄ± olmayacaktÄ±r.
Ãye iÅyeri tanÄ±mÄ±nda tÃ¼m iÅlemlerin sabit bir vergi oranÄ±yla PAYEâye iletilmesi istenirse bu alanlar gÃ¶nderilmeyebilir.EÄer farklÄ± vergi dilimleri ve tutarlarÄ±yla tamamlanacaksa bu bilgiler zorunludur.ÃrneÄin; %1 ve %8lik vergi diliminde toplam 3 TLlik bir iÅlem iÃ§in:mealPer1Tax vergi dilimi %8 iÃ§in 800mealPer1Amount vergi dilimindeki tutar 1 TL iÃ§in 100mealPer1Tax vergi dilimi %1 iÃ§in 100mealPer1Amount vergi dilimindeki tutar 2 TL iÃ§in 200
Response Parameters

Field Format Length (O)ptional/(M)andatory Description
orderId String 32 O Kartla Ã¶demede banka sisteminde iletilen sipariÅ numarasÄ±dÄ±r. Mobil Ã¶demede ise Mobil Ãdeme tarafÄ±ndan iletilen sipariÅ numarasÄ±dÄ±r.
acquirerBankCode String 3 O Ä°Ålemde kullanÄ±lan kartÄ±n bankasÄ±nÄ±n EFT kodu numarasÄ±dÄ±r. Mobil Ã¶demede bu alan boÅ dÃ¶ner.PAYE ile tamamlanan iÅlemlerde 996 dÃ¶ner.
approvalCodeo String 6 O Banka sisteminden iletilen onay kodudur. Mobil Ã¶demede bu alan boÅ dÃ¶ner.
reconciliationDate String 8 O Ä°Ålemin mutabakatÄ± iÃ§in PAYCELL sisteminde belirlenen tarih bilgisidir. YYYYMMDD formatÄ±nda olacaktÄ±r.
issuerBankCode String 3 O Ä°Ålemde kullanÄ±lan kartÄ±n bankasÄ±nÄ±n EFT kodu numarasÄ±dÄ±r. Mobil Ã¶demede bu alan boÅ dÃ¶ner.PAYE ile tamamlanan iÅlemlerde 996 dÃ¶ner.
**Request Example:** (Kart ile Ãdeme)

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "amount": "1",
  "cardId": "e43d5943-3e39-4f1c-8dc8-a52cc5828849",
  "currency": "TRY",
  "merchantCode": "2005",
  "msisdn": "5332109681",
  "paymentType": "SALE",
  "paymentMethodType": "CREDIT_CARD",
  "referenceNumber": "12333374401234568900"
}
```

**Response Example:** (Kart ile Ãdeme)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526222621143",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "957460402819052622261919",
  "acquirerBankCode": "046",
  "issuerBankCode": "046",
  "approvalCode": "311918",
  "reconciliationDate": "20190526",
  "iyzPaymentId": null,
  "iyzPaymentTransactionId": null
}
```

**Request Example:** (Mobil Ãdeme)

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "msisdn": "5332109727",
  "amount": "1",
  "currency": "TRY",
  "merchantCode": "1182",
  "paymentMethodType": "MOBILE_PAYMENT",
  "paymentType": "SALE",
  "referenceNumber": "123452106152"
}
```

**Response Example:** (Mobil Ãdeme)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190525213956409",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "5131719",
  "acquirerBankCode": null,
  "issuerBankCode": null,
  "approvalCode": null,
  "reconciliationDate": "20190525",
  "iyzPaymentId": null,
  "iyzPaymentTransactionId": null
}
```

**Request Example:** (PAYE ile Ãdeme)

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "11246782101234561119"
  },
  "amount": "100",
  "cardId": "01f7b0dd-eb3f-4241-bbcf-92414aaa2c81",
  "currency": "TRY",
  "merchantCode": "9999",
  "msisdn": "905332108191",
  "paymentType": "SALE",
  "paymentMethodType": "CREDIT_CARD",
  "referenceNumber": "12313372402234568901",
  "extraParameters": [
    {
      "key": "mealPer1Tax",
      "value": "1800"
    },
    {
      "key": "mealPer1Amount",
      "value": "50"
    },
    {
      "key": "mealPer2Tax",
      "value": "100"
    },
    {
      "key": "mealPer2Amount",
      "value": "50"
    }
  ]
}
```

**Response Example:** (PAYE ile Ãdeme)

```json
{
  "responseHeader": {
    "transactionId": "11246782101234561119",
    "responseDateTime": "20201121223653796",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "313302652820112122365221",
  "acquirerBankCode": "996",
  "issuerBankCode": "996",
  "approvalCode": null,
  "reconciliationDate": "20201121",
  "iyzPaymentId": null,
  "iyzPaymentTransactionId": null
}
```

Ãn Otorizasyon â FinansallaÅtÄ±rma (Preauth â Postauth)
Ãdeme iÅlemleri iÃ§in satÄ±Å (SALE) dÄ±ÅÄ±nda PREAUTH (Ã¶n otorizasyon) ve POSTAUTH (finansallaÅtÄ±rma) olmak Ã¼zere iki farklÄ± iÅlem tipi mevcuttur.
EÄer Ã¶deme iÅleminde preauth kullanÄ±lÄ±yorsa karttan Ã¶n provizyon alÄ±nÄ±r ve Ã¼ye iÅyeri adÄ±na, kart limitine provizyon miktarÄ± kadar bloke konulur. Provizyon iÅlemi iÅyeri tarafÄ±ndan onaylanmadÄ±kÃ§a Ã¼ye iÅyeri hesabÄ±na yansÄ±maz. Ãdemenin alÄ±nÄ±p iÅlemin tamamlanmasÄ± iÃ§in preauth iÅleminin finansallaÅtÄ±rma aÅamasÄ±na geÃ§mesi gerekir.

Preauth yapÄ±lan iÅlemin finansallaÅtÄ±rÄ±lmasÄ± iÃ§in ise postauth iÅlem tipi kullanÄ±lÄ±r. Preauth aÅamasÄ±nda Ã¶n provizyon alÄ±nan iÅlem onaylanÄ±r ve finansallaÅtÄ±rma gerÃ§ekleÅtirilir.

Postauth iÅlemi preauth olmadan yapÄ±lamaz.
Postauth tutarÄ± preauth tutarÄ±na eÅit ya da preauth tutarÄ±ndan az olabilir ancak fazla olamaz.
Postauth iÅleminde kullanÄ±lan deÄeri kapatÄ±lacak olan preauth iÅleminin reference number deÄeridir. DiÄer iÅlem tiplerinde (SALE,PREAUTH) bu deÄer gÃ¶nderilmez.
Preauth iÅlemi finansallaÅtÄ±rÄ±lmadan iptal edilecekse "reverse" metodu kullanÄ±labilir. Bu durumda iÅlem tipi "PREAUTH_REVERSE" olarak gÃ¼ncellenir.
Preauth iÅlemi finansallaÅtÄ±rma sonrasÄ±nda iptal edilecekse "reverse" metodu kullanÄ±labilir. Bu durumda iÅlem tipi "POSTAUTH_REVERSE" olarak gÃ¼ncellenir.
Preauth ve postauth iÅlemleri iÃ§in reverse metodu Ã§aÄÄ±rÄ±lÄ±rken, preauth iÅlemine ait reference number deÄeri originalReferenceNumber alanÄ±nda iletilir.
Preauth ve postauth iÅlemlerinin iadesi (refund) bulunmamaktadÄ±r.
**Request Example:** (Preauth)

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "amount": "1",
  "cardId": "e43d5943-3e39-4f1c-8dc8-a52cc5828849",
  "currency": "TRY",
  "merchantCode": "2005",
  "msisdn": "5332119826",
  "paymentType": "PREAUTH",
  "paymentMethodType": "CREDIT_CARD",
  "referenceNumber": "12333374401234569900"
}
```

**Response Example:** (Preauth)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526223934353",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "857391542719052622393217",
  "acquirerBankCode": "046",
  "issuerBankCode": "046",
  "approvalCode": "855982",
  "reconciliationDate": "20190526",
  "iyzPaymentId": null,
  "iyzPaymentTransactionId": null
}
```

**Request Example:** (Postauth)

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "amount": "1",
  "cardId": "e43d5943-3e39-4f1c-8dc8-a52cc5828849",
  "currency": "TRY",
  "merchantCode": "2005",
  "msisdn": "5332119826",
  "paymentType": "POSTAUTH",
  "paymentMethodType": "CREDIT_CARD",
  "originalReferenceNumber": "12333374401234569900",
  "referenceNumber": "12333374401234569911"
}
```

**Response Example:** (Postauth)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526224332669",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "857391542719052622393217",
  "acquirerBankCode": "046",
  "issuerBankCode": "046",
  "approvalCode": "855982",
  "reconciliationDate": "20190526",
  "iyzPaymentId": null,
  "iyzPaymentTransactionId": null
}
```

### inquireAll

YapÄ±lan Ã¶demenin iÅlem sonucunun sorgulanmasÄ± amacÄ±yla kullanÄ±lÄ±r. Provision servisi senkron olarak iÅlem sonucunu dÃ¶nmektedir, ancak provision servisine herhangi bir teknik arÄ±za sebebiyle cevap dÃ¶nÃ¼lememesi sonrasÄ±nda iÅlem timeoutâa dÃ¼ÅtÃ¼ÄÃ¼nde iÅlemin sonucu inquire ile sorgulanabilir. inquire servisi yapÄ±lan iÅleme iliÅkin iÅlemin son durumunu ve iÅlemin tarihÃ§e bilgisini iletir.
Request Parameters

Field Format Length (O)ptional/(M)andatory Description
msisdn String 20 M MÃ¼Återinin uygulamaya login olduÄu telefon numarasÄ±. Ãlke kodu + Telefon No formatÄ±nda iletilir.
originalReferanceNumber String 20 M Sorgulanacak iÅlemin "referenceNumber" deÄeridir.
referanceNumber String 20 M Ãye iÅyeri uygulamasÄ± tarafÄ±ndan Ã¼retilecek unique numerik iÅlem referans numarasÄ± deÄeridir. Ä°lk 3 hanesi uygulama bazÄ±nda uniqueâdir, bu deÄer entegrasyon aÅamasÄ±nda Paycell tarafÄ±ndan bildirilecektir.
merchantCode String 19 M Ãdeme iÅleminin baÅlatÄ±ldÄ±ÄÄ± Paycellâde tanÄ±mlÄ± Ã¼ye iÅyeri kodu bilgisi gÃ¶nderilir. Entegrasyon sonrasÄ±nda her tanÄ±mlanan yeni Ã¼ye iÅyeri iÃ§in Paycell tarafÄ±ndan merchantCode deÄeri paylaÅÄ±lÄ±r.
Response Parameters

Field Format Length (O)ptional/(M)andatory Description
orderId String 32 O Banka sisteminde iletilen sipariÅ numarasÄ±dÄ±r.
acquirerBankCode String 3 O Ä°Ålemde kullanÄ±lan sanal pos bankasÄ±nÄ±n EFT kodu numarasÄ±dÄ±r.
status String 12 O Ä°Ålemin gÃ¼ncel durumudur:SALE, PREAUTH, POSTAUTH, PREAUTH_REVERSE, POSTAUTH_REVERSE, REVERSE, REFUND
paymentMethodType String 20 O Sorgulanan iÅlemin hangi Ã¶deme yÃ¶ntemi ile yapÄ±ldÄ±ÄÄ±nÄ± belirtir. Kartla yapÄ±lmÄ±Å bir iÅlemse "CREDIT_CARD", mobil Ã¶deme ile yapÄ±lmÄ±Å bir iÅlemse "MOBILE_PAYMENT" deÄerini alÄ±r.
provisionList Array O Ä°Åleme ait tarihÃ§e bilgisi iletilir.
provisionList

Field Format Length (O)ptional/(M)andatory Description
provisionType String 12 O Ä°Ålemin tipini belirtir:SALE, PREAUTH, POSTAUTH, PREAUTH_REVERSE, POSTAUTH_REVERSE, REVERSE, REFUND
transactionId String 20 O Ä°lgili iÅlemin transactionId bilgisidir.
amount String 12 O Ä°lgili iÅlem tutarÄ±dÄ±r.
approvalCode String 6 O Banka sisteminden iletilen onay kodudur.
dateTime String 17 O Ä°lgili iÅlemin gerÃ§ekleÅme zamanÄ±dÄ±r.
reconciliationDate String 8 O Ä°Ålemin mutabakatÄ± iÃ§in PAYCELL sisteminde belirlenen tarih bilgisidir. YYYYMMDD formatÄ±nda olacaktÄ±r.
responseCode String 20 M Ä°lgili iÅlemin sonuÃ§ bilgisidir.
0: Success, >0: Fail
responseDescription String 200 M Ä°lgili iÅlemin sonuÃ§ aÃ§Ä±klama bilgisidir.
**Request Example:** (Kart ile YapÄ±lan Ä°Ålemler Ä°Ã§in)

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "msisdn": "5332118747",
  "merchantCode": "2005",
  "originalReferenceNumber": "12333374401234568900",
  "referenceNumber": "123452116154"
}
```

**Response Example:** (Kart ile YapÄ±lan Ä°Ålemler Ä°Ã§in)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526225105147",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "957460402819052622261919",
  "acquirerBankCode": "046",
  "status": "SALE",
  "paymentMethodType": "CREDIT_CARD",
  "provisionList": [
    {
      "provisionType": "SALE",
      "transactionId": "12345678901234567893",
      "amount": "001",
      "approvalCode": "311918",
      "dateTime": "20190526222621142",
      "reconciliationDate": "20190526",
      "responseCode": "0",
      "responseDescription": "Success"
    }
  ]
}
```

**Request Example:** (Mobil Ãdeme ile YapÄ±lan Ä°Ålemler Ä°Ã§in)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526225105147",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "957460402819052622261919",
  "acquirerBankCode": "046",
  "status": "SALE",
  "paymentMethodType": "CREDIT_CARD",
  "provisionList": [
    {
      "provisionType": "SALE",
      "transactionId": "12345678901234567893",
      "amount": "001",
      "approvalCode": "311918",
      "dateTime": "20190526222621142",
      "reconciliationDate": "20190526",
      "responseCode": "0",
      "responseDescription": "Success"
    }
  ]
}
```

**Response Example:** (Mobil Ãdeme ile YapÄ±lan Ä°Ålemler Ä°Ã§in)

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20190526225000167",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "orderId": "5131719",
  "acquirerBankCode": null,
  "status": "REFUND",
  "paymentMethodType": "MOBILE_PAYMENT",
  "provisionList": [
    {
      "provisionType": "REFUND",
      "transactionId": "12345678901234567893",
      "amount": "001",
      "approvalCode": null,
      "dateTime": "20190525214401462",
      "reconciliationDate": "20190525",
      "responseCode": "0",
      "responseDescription": "Success"
    },
    {
      "provisionType": "SALE",
      "transactionId": "0000000000000300433",
      "amount": "001",
      "approvalCode": null,
      "dateTime": "20190525213956408",
      "reconciliationDate": "20190525",
      "responseCode": "0",
      "responseDescription": "Success"
    }
  ]
}
```

### refundAll

YapÄ±lan Ã¶deme iÅleminin iade edilmesi amacÄ±yla kullanÄ±lÄ±r.
Kart ile yapÄ±lan iÅlemler iÃ§in:
Ä°ade, iÅlemin gÃ¼nsonu ardÄ±ndan ertesi gÃ¼nden itibaren iptal edilemesi veya belirli bir tutarÄ±n iade edilmesi amacÄ±yla kullanÄ±lÄ±r. Ä°ptal iÅlemi iki Åekilde Ã§aÄÄ±rabilir. Provision servisine cevap alÄ±namayarak timeout alÄ±nmasÄ± durumunda, iÅlem mutabakatÄ±nÄ±n saÄlanmasÄ± amacÄ±yla Åayet gÃ¼nsonu olmuÅ ise sistem tarafÄ±ndan refund gÃ¶nderilebilir. MÃ¼Återinin iade talebi olmasÄ± durumunda Ã¼ye iÅyeri tarafÄ±ndan manuel olarak Ã§aÄrÄ±labilir. Ä°ade iÅlemi birden fazla sayÄ±da Ã§aÄrÄ±labilir, iptal edilmiÅ bir iÅlem iÃ§in iade iÅlemi gerÃ§ekleÅtirilemez, toplam iade tutarÄ± iÅlem tutarÄ±nÄ±n Ã¼zerinde olamaz.
Mobil Ã¶deme ile yapÄ±lan iÅlemler iÃ§in:
Mobil Ã¶deme iÃ§in iptal kurgusu bulunmayÄ±p, tÃ¼m iÅlemler iÃ§in iade servisi Ã§aÄrÄ±lÄ±r. DolayÄ±sÄ±yla iÅlem iÃ§in aynÄ± gÃ¼n iÃ§inde de iade servisi Ã§aÄrÄ±labilir. Ä°ade iÅlemi birden fazla sayÄ±da Ã§aÄrÄ±labilir, toplam iade tutarÄ± iÅlem tutarÄ±nÄ±n Ã¼stÃ¼nde olamaz.
Request Parameters

Field Format Length (O)ptional/(M)andatory Description
msisdn String 20 M MÃ¼Återinin uygulamaya login olduÄu telefon numarasÄ±. Ãlke kodu + Telefon No formatÄ±nda iletilir.
originalReferanceNumber String 20 M Ä°ade edilecek iÅlemin "referenceNumber" deÄeridir.
referanceNumber String 20 M Ãye iÅyeri uygulamasÄ± tarafÄ±ndan Ã¼retilecek unique numerik iÅlem referans numarasÄ± deÄeridir. Ä°lk 3 hanesi uygulama bazÄ±nda uniqueâdir, bu deÄer entegrasyon aÅamasÄ±nda Paycell tarafÄ±ndan bildirilecektir.
merchantCode String 19 M Ãdeme iÅleminin baÅlatÄ±ldÄ±ÄÄ± Paycellâde tanÄ±mlÄ± Ã¼ye iÅyeri kodu bilgisi gÃ¶nderilir. Entegrasyon sonrasÄ±nda her tanÄ±mlanan yeni Ã¼ye iÅyeri iÃ§in Paycell tarafÄ±ndan merchantCode deÄeri paylaÅÄ±lÄ±r.
amount string 12 M Ä°ade edilmesi istenen iÅlem tutarÄ±dÄ±r. Son 2 hane KURUÅâu ifade eder. VirgÃ¼l kullanÄ±lmaz.
Ãrnekler:
1TL = 100
15,25TL = 1525
pointAmount string 12 O Ä°leride kullanÄ±lmak Ã¼zere ayrÄ±lmÄ±ÅtÄ±r. Ä°ade edilmesi istenen kart puan bilgisidir.
Response Parameters

Field Format Length (O)ptional/(M)andatory Description
approvalCode String 6 O Banka sisteminden iletilen onay kodudur.
reconciliationDate String 8 O Ä°Ålemin mutabakatÄ± iÃ§in PAYCELL sisteminde belirlenen tarih bilgisidir. YYYYMMDD formatÄ±nda olacaktÄ±r.
**Request Example:**

```json
{
  "requestHeader": {
    "applicationName": "XXXX",
    "applicationPwd": "XXXX",
    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",
    "transactionId": "12345678901234567893"
  },
  "msisdn": "5332173763",
  "amount": "1",
  "merchantCode": "1182",
  "originalReferenceNumber": "123452106152",
  "referenceNumber": "123452116153"
}
```

**Response Example:**

```json
{
  "responseHeader": {
    "transactionId": "00000000000002187144",
    "responseDateTime": "20181017143240726",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "reconciliationDate": "20181017",
  "approvalCode": "820013",
  "retryStatusCode": null,
  "retryStatusDescription": null
}
```

### getCardTokenSecure

Kart numarasÄ± girilerek yapÄ±lan iÅlemlerde Ã¶ncelikle kart bilgilerine ait token deÄeri alÄ±nmalÄ±dÄ±r. AlÄ±nan token deÄeri, gerÃ§ekleÅtirilmesi istenen iÅlem tipi iÃ§in Ã§aÄrÄ±lan servise input olarak eklenmelidir. getCardTokenSecure Ã§aÄrÄ±larak alÄ±nan token deÄerinin input olarak kullanÄ±ldÄ±ÄÄ± iÅlemler aÅaÄÄ±daki gibidir.

Kart ekleme 3D doÄrulama olmadan: getCardTokenSecure + registerCard

Kart ekleme 3D doÄrulama ile: getCardTokenSecure + (getThreeDSession + registerCard)

Kart numarasÄ± girilerek yapÄ±lan 3D doÄrulama olmadan Ã¶deme: getCardTokenSecure + provision

Kart numarasÄ± girilerek yapÄ±lan 3D doÄrulama ile Ã¶deme: getCardTokenSecure + (getThreeDSession + provision)
Servis inputunda yer alan hashdata oluÅturulmasÄ±nda kullanÄ±lan parametreler "backend" tarafÄ±nda tutulmalÄ± ve hashdata "backend" Ã¼zerinde oluÅturularak uygulama/clientâa bildirilmelidir. getCardTokenSecure servisi doÄrudan uygulama/client tarafÄ±ndan ilgili parametreler ile Ã§aÄrÄ±lmalÄ±dÄ±r.
Implementasyon kullanÄ±cÄ± arayÃ¼zÃ¼ olarak web sayfasÄ± kullanÄ±yorsa cross-origin hatasÄ±nÄ±n alÄ±nmasÄ±nÄ±nÄ±n engellenmesi iÃ§in Ã¼ye iÅyeri domain bilgileri Paycellâe iletilmelidir ve Paycellâde yetki tanÄ±mlamasÄ± yapÄ±lmalÄ±dÄ±r. KullanÄ±cÄ± arayÃ¼zÃ¼ mobil uygulama iÃ§in herhangi bir tanÄ±ma gerek bulunmamaktadÄ±r.
requestParameters
requestHeader

Field Format Length (O)ptional/(M)andatory Description
applicationName String 20 M Servisi Ã§aÄÄ±ran uygulamaya Ã¶zel belirlenmiÅ kullanÄ±cÄ± adÄ± bilgisidir, entegrasyon aÅamasÄ±nda Paycell tarafÄ±ndan bildirilecektir.
transactionId String 20 M applicationName bazÄ±nda unique transactionId bilgisidir. Uygulama tarafÄ±ndan Ã¼retilir.
transactionDateTime String 17 M YYYYMMddHHmmssSSS formatÄ±nda iÅlem zamanÄ± bilgisidir.
requestBody

Field Format Length (O)ptional/(M)andatory Description
creditCardNo String 16 O Kredi kartÄ± numarasÄ±
expireDateMonth String 2 O Son kullanma tarihi ay bilgisi
01, 02, â¦
expireDateYear String 2 O Son kullanma tarihi yÄ±l bilgisi
17, 18, â¦
cvcNo String 3 O KartÄ±n CVC/CVV deÄeri
hashData String 50 M
PAYCELL tarafÄ±ndan iletilecek applicationPwd ve secureCode ile input parametreleri hashâlenir.
Hash data oluÅturulmasÄ±nda kullanÄ±lacak olan gÃ¼venlik parametreleri (applicationName, applicationPwd, secureCode) server tarafÄ±nda tutulmalÄ±dÄ±r, hash oluÅturma iÅlemi server tarafÄ±nda yapÄ±lmalÄ±dÄ±r, ancak oluÅan deÄerler uygulama/client tarafÄ±nda iletilerek getCardTokenSecure servisi uygulama/client tarafÄ±ndan Ã§aÄrÄ±lmalÄ±dÄ±r.
hashData 2 aÅamada oluÅturulacaktÄ±r.

Her iki aÅamada da ilgili parametreler bÃ¼yÃ¼k harfe dÃ¶nÃ¼ÅtÃ¼rÃ¼lerek data oluÅturulmalÄ±dÄ±r.
Ä°lk aÅamada securityData hashlenerek oluÅturulur. securityData oluÅturulurken applicationName ve applicationPwd deÄeri bÃ¼yÃ¼k harfe Ã§evrilir. OluÅan securityData deÄeri ikinci aÅamadaki hashData Ã¼retiminde kullanÄ±lmak Ã¼zere bÃ¼yÃ¼k harfe dÃ¶nÃ¼ÅtÃ¼rÃ¼lÃ¼r.
Ä°kinci aÅamada, oluÅturulan securityData ile diÄer deÄerler bÃ¼yÃ¼k harfe Ã§evrilerek birleÅtirilip elde edilen deÄer hashlenerek hashData oluÅturulur.

securityData: applicationPwd+ applicationName
hashData: applicationName+ transactionId+ transactionDateTime+ secureCode + securityData
Java hash Ã¶rneÄi aÅaÄÄ±daki gibidir.
java.security.MessageDigest sha2 = java.security.MessageDigest.getInstance("SHA-256");
hash = Base64.encodeBase64String(sha2.digest(paramsVal.getBytes()));
;

responseParameters
responseHeader

Field Format Length (O)ptional/(M)andatory Description
transactionId String 20 M Request ile iletilen transactionID
responseDateTime String 17 M YYYYMMddHHmmssSSS
responseCode String 20 M 0: Success, >0: Fail
responseDescription string 200 M Ä°Ålem sonuÃ§ aÃ§Ä±klamasÄ±
responseBody

Field Format Length (O)ptional/(M)andatory Description
cardToken String 36 O AlÄ±nan tokenize kart bilgisi
hashData String 50 M
responseBodyâde dÃ¶nÃ¼len hashData ile Ã¼ye iÅyerinin oluÅturacaÄÄ± hashData eÅit olmalÄ±dÄ±r. Bu kontrol Ã¼ye iÅyeri tarafÄ±ndan yapÄ±lÄ±r.
Ãye iÅyerinin oluÅturacaÄÄ± hashData 2 aÅamada oluÅturulacaktÄ±r. Ä°lk aÅamada securityData hashlenerek oluÅturulur. Ä°kinci aÅamada oluÅturulan securityData ile diÄer deÄerler birleÅtirilerek elde edilen deÄer hashlenerek hashData oluÅturulur.

securityData: applicationPwd+ applicationName

hashData: applicationName+ transactionId+ responseDateTime + responseCode + cardToken + secureCode + securityData
Java hash Ã¶rneÄi aÅaÄÄ±daki gibidir.
java.security.MessageDigest sha2 = java.security.MessageDigest.getInstance("SHA-256");
hash = Base64.encodeBase64String(sha2.digest(paramsVal.getBytes()));

**Request Example:**

{ "header": { "applicationName":"XXXX", "transactionId":"13115080770554206495", "transactionDateTime":"20171015141735420" }, "creditCardNo":"4355084355084358", "expireDateMonth":"12", "expireDateYear":"18", "cvcNo":"", "hashData":"IkpBlQHJgptYSzQCzBJvmVzGEg4teoSbB8VeHe6VVXw=" }
**Response Example:**

{ "header": { "responseCode": "0", "responseDateTime": "20171015141735420", "responseDescription": "Islem basarili", "transactionId": "13115080770554206495" }, "cardToken": "49d55d0e-37ce-4dcc-a2ea-9b452461b157", "hashData": "3Edn4YMafNjwjyWzDp1olbRB3ycJsJn90leS3yH9VLA=" }

queryOrderVpf
Ä±mage

1.  Servis Genel Bilgileri
    Servis istenen tarih aralÄ±ÄÄ±nda, TPAY servislerinden geÃ§miÅ satÄ±Å ve iade iÅlemlerine ait finansal verilerin listelenmesi amacÄ±yla kullanÄ±lmaktadÄ±r.

Servis adÄ± : queryOrderVpf ï· TPAY Servis url bilgileri :
Test : https://tpay-test.turkcell.com.tr/tpay/provision/services/restful/getCardToken/ queryOrderVpf
PRP : https://tpay-prp.turkcell.com.tr/tpay/provision/services/restful/getCardToken/ queryOrderVpf
Prod : https://tpay.turkcell.com.tr/tpay/provision/services/restful/getCardToken/ queryOrderVpf
Apigw Ã¼zerinden eriÅimde kullanÄ±lacak url bilgileri :
Test : https://apigwtst.turkcell.com.tr:8443/tpay/provision/services/restful/getCardToken/ queryOrderVpf
PRP : https://apigwprp.turkcell.com.tr:8443/tpay/provision/services/restful/getCardToken/ queryOrderVpf
Prod : https://apigwmain.turkcell.com.tr:8443/tpay/provision/services/restful/ getCardToken/queryOrderVpf 2. Servis Request Parametreleri
name M/O description
requestHeader applicationName m Servisi Ã§aÄÄ±ran Ã¼ye iÅyerine verilen applicationName
applicationPwd m Servisi Ã§aÄÄ±ran Ã¼ye iÅyerine verilen applicationâa ait password
transactionDateTime m
Servisin Ã§aÄÄ±rÄ±ldÄ±ÄÄ± tarih saat, Ã¶rnek data :

20160309084056197

transactionId m Servisin her Ã§aÄÄ±rÄ±mÄ±nda unique olacak Åekilde Ã¼retilerek gÃ¶nderilmesi gereken idâdir.
Parameters TRANSACTION_START_DATE m Listelenmek istenen kayÄ±tlarÄ±n tarih aralÄ±ÄÄ±na ait baÅlangÄ±Ã§ tarihi
TRANSACTION_END_DATE m Listelenmek istenen kayÄ±tlarÄ±n tarih aralÄ±ÄÄ±na ait bitiÅ tarihi
MERCHANT_CODE m Applicationâa baÄlÄ±, iÅlem verisi listelenmek istenen Merchant_code bilgisidir.
SIZE m Servis Ã§aÄÄ±rÄ±mÄ±nda listelenmesi istenen kayÄ±t sayÄ±sÄ± â Page sayÄ±sÄ± size ve total_size gÃ¶re belirlenir.
PAGE m Servis Ã§aÄÄ±rÄ±mÄ±nda listelenmesi istenen page numarasÄ±
BASKET_ID o Opsiyonel olarak provisionAll servisinde veri gÃ¶nderilmiÅse, Ã¶deme kaydÄ±na bu veri iliÅkilendirilir. Bu dokÃ¼manda anlatÄ±lan serviste transaction iÃ§in veri dÃ¶ner.
MERCHANT_SPECIAL_DATA o Opsiyonel olarak provisionAll servisinde veri gÃ¶nderilmiÅse, Ã¶deme kaydÄ±na bu veri iliÅkilendirilir. Bu dokÃ¼manda anlatÄ±lan serviste transaction iÃ§in veri dÃ¶ner.
MERCHANT_SPECIAL_DATA2 o Opsiyonel olarak provisionAll servisinde veri gÃ¶nderilmiÅse, Ã¶deme kaydÄ±na bu veri iliÅkilendirilir. Bu dokÃ¼manda anlatÄ±lan serviste transaction iÃ§in veri dÃ¶ner.
MERCHANT_SPECIAL_DATA3 o Opsiyonel olarak provisionAll servisinde veri gÃ¶nderilmiÅse, Ã¶deme kaydÄ±na bu veri iliÅkilendirilir. Bu dokÃ¼manda anlatÄ±lan serviste transaction iÃ§in veri dÃ¶ner.
ORDER_ID O Sorgulanmak istenen iÅleme ait, provisionAll servis dÃ¶nÃ¼ÅÃ¼nde yer alan Order_id bilgisidir. Ä°Åleme ait uniqueIdâdir.
**Request Example:** :

```json
{
  "requestHeader": {
    "applicationName": "***************",

    "applicationPwd": "******************",

    "clientIPAddress": "10.252.187.81",
    "transactionDateTime": "20160309084056197",

    "transactionId": "12345678901234567893"
  },

  "transactionStartDate": "01-05-2024",

  "transactionEndDate": "30-05-2024",

  "merchantCode": "**************",

  "clientBasketId": "",

  "merchantSpecialData": "",

  "vposOrderId": "",

  "size": "12",

  "page": "0"
}
```

3.  Servis Response Parametreleri
    Name description
    responseHeader responseCode
    0 â success

<> 0 ise servis hata vermiÅ demektir.

responseDateTime Servisin response tarihi
responseDescription Servis hata mesaj aÃ§Ä±klamasÄ±dÄ±r
transactionId Servis Ã§aÄÄ±rÄ±mÄ±na ait transactionIdâdir. Listelenen iÅlemlere ait deÄil, queryOrderVpf servisinin Ã§aÄÄ±rÄ±mÄ±na ait idâdir.
Parameters TOTAL_SIZE Sorgulanan tarih aralÄ±ÄÄ±ndaki toplam kayÄ±t sayÄ±sÄ±nÄ± verir.
CURRENT_PAGE Listelenen pageâe ait numarayÄ± verir.
TOTAL_PAGE Requestte gÃ¶nderilen size ve total_sizeâa gÃ¶re toplam kaÃ§ sayfada verinin Ã§ekileceÄini gÃ¶sterir. Page number 0âdan baÅlar. Ãrnek olarak total_page = 3 ise requestte sÄ±rasÄ±yla 0, 1, 2 gÃ¶nderilerek tÃ¼m kayÄ±tlar alÄ±nabilir.
MERCHANT_LEGAL_NAME Ãye iÅyerinin adÄ±
TRANSACTION_TYPE Ã¶deme tipi alabileceÄi deÄerler : SATIS, IADE
Merchant_code requestte gÃ¶nderilen merhant code dÃ¶nÃ¼lÃ¼r
Sub_merchant_code responseâta sub_dealer_code varsa dÃ¶nÃ¼lÃ¼r
INSTALLMENT_COUNT taksit sayÄ±sÄ±
TRANSACTION_DATE iÅlemin yapÄ±ldÄ±ÄÄ± tarih
VALOR_DATE Ã¶demenin yapÄ±lacaÄÄ± tarih
PAYCELL_COMMISSION_RATE komisyon oranÄ±
CALC_COMMISSION_AMOUNT komisyon tutarÄ±
CC_NUMBER Ä°Ålem yapÄ±lan kartÄ±n ilk 4 hanesi
VPOS_ORDER_ID Ä°Åleme ait unique_id
CLIENT_BASKET_ID Opsiyonel bir bilgidir, ProvisionAllâda gÃ¶nderilmiÅ ise bu serviste dÃ¶ner.
MERCHANT_SPECIAL_DATA Opsiyonel bir bilgidir, ProvisionAllâda gÃ¶nderilmiÅ ise bu serviste dÃ¶ner.
MERCHANT_SPECIAL_DATA2 Opsiyonel bir bilgidir, ProvisionAllâda gÃ¶nderilmiÅ ise bu serviste dÃ¶ner.
MERCHANT_SPECIAL_DATA3 Opsiyonel bir bilgidir, ProvisionAllâda gÃ¶nderilmiÅ ise bu serviste dÃ¶ner.
CARD_TYPE KartÄ±n tipini verir. Credit_Card, Debit_Card vb.
CARD_FAMILY
KartÄ±n organizasyon bilgisini verir. VISA,

MASTERCARD vb.

BOLGE Bu alan opsiyonel olarak kullanÄ±lÄ±r, iÅlemin yapÄ±ldÄ±ÄÄ± Ã¼ye iÅyerine ait detay veri dÃ¶ner.
IBAN_NO Ãye iÅyerinin hak ediÅinin Ã¶deneceÄi IBAN bilgisidir.
FOREIGN_CARD Ä°Ålem yapÄ±lan kartÄ±n yabancÄ± kart olup olmadÄ±ÄÄ±nÄ± dÃ¶ner.
**Response Example:** :

```json
{
  "responseHeader": {
    "transactionId": "12345678901234567893",
    "responseDateTime": "20240813161858955",
    "responseCode": "0",
    "responseDescription": "Success"
  },
  "extraParameters": null,
  "pageInfoResponse": {
    "totalSize": "10",
    "currentPage": "0",
    "totalPage": "5"
  },
  "items": [
    {
      "merchantLegalName": "TÃHAÅ ÃDEME ELEKTRONÄ°K",
      "taxNumber": "8806546623",
      "subMerchantNumber": "201769",
      "terminalNumber": "60416",
      "subDealerCode": "100000511",
      "transactionType": "SATIS",
      "installmentCount": "1",
      "transactionDate": "20-05-2024",
      "valorDate": "31-05-2024",
      "paycellCommissionRate": "1",
      "calcCommissionAmount": "0.15",
      "grossAmount": "15",
      "calcNetAmount": "14.85",
      "ccNumber": "5200",
      "vPosOrderId": "664b2853dd81876c744d3b68",
      "applicationId": "1421",
      "clientBasketId": null,
      "merchantSpecialData": null,
      "merchantSpecialData2": null,
      "merchantSpecialData3": null,
      "cardType": "Credit_Card",
      "cardFamily": "VISA",
      "bolge": null,
      "ibanNo": "TR123456119012345678901276",
      "foreignCard": "0"
    },
    {
      "merchantLegalName": "TÃHAÅ ÃDEME ELEKTRONÄ°K",
      "taxNumber": "8806546623",
      "subMerchantNumber": "201769",
      "terminalNumber": "60416",
      "subDealerCode": null,
      "transactionType": "SATIS",
      "installmentCount": "1",
      "transactionDate": "20-05-2024",
      "valorDate": "31-05-2024",
      "paycellCommissionRate": "1",
      "calcCommissionAmount": "0.2",
      "grossAmount": "20",
      "calcNetAmount": "19.8",
      "ccNumber": "520019",
      "vPosOrderId": "664b4809dd818721d24d3b84",
      "applicationId": "1421",
      "clientBasketId": null,
      "merchantSpecialData": null,
      "merchantSpecialData2": null,
      "merchantSpecialData3": null,
      "cardType": "Credit_Card",
      "cardFamily": "VISA",
      "bolge": null,
      "ibanNo": "TR123456119012345678901276",
      "foreignCard": "0"
    }
  ]
}
```

4.  Hata kodlarÄ±
    Hata kodu AÃ§Ä±klama TPAY hata dÃ¶nÃ¼ÅÃ¼
    0 Success Ä°Ålem BaÅarÄ±lÄ±
    10509 En fazla 90 gÃ¼nlÃ¼k veri listelenebilir. En fazla 90 gÃ¼nlÃ¼k veri listelenebilir.
    10507
    GeÃ§ersiz Tarih FormatÄ±. OlmasÄ± gereken dd-

MM-yyyy

GeÃ§ersiz Tarih FormatÄ±. OlmasÄ± gereken dd-

MM-yyyy
